{% extends 'base.html.twig' %}

{% block title %}Liste des formations{% endblock %}

{% block body %}
{% set currentDate = "now"|date('Y-m-d') %}

<h1>Liste des formations</h1>


{% for formation in formations %}

    {% set x = 0 %}
    {% for session in formation.sessions %}
   
    
        {% if session.fin|date('Y-m-d') >= currentDate|date('Y-m-d') and session.debut|date('Y-m-d') <= currentDate|date('Y-m-d') %}

            {% set x = x + 1 %}
            
        {% endif %}
    {% endfor %}

    <p><a href="{{path('show_formation',{'id':formation.id})}}">{{ formation.nom}}</a> ({{formation.sessions|length}} sessions a ce jour) ({{ x }} sessions en cour ) <a style="color:orange" href="{{path('edit_formation',{'id':formation.id})}}"><i class="fa-solid fa-pen-to-square"></i></a> <a style="color:red" href="{{path('delete_formation',{'id':formation.id})}}"><i class="fa-solid fa-x"></i></a></p> 
    
{% endfor %}

<a href="{{path('new_formation')}}">Ajouter une formation</a>
{% endblock %}
